---
import Layout from '../../layouts/Layout.astro';
import BlogListing from '../../components/BlogListing.astro';
import { getPosts, getAllTags } from '../../lib/content';

const POSTS_PER_PAGE = 6;

const allPosts = await getPosts();
const tags = await getAllTags();
const totalPages = Math.max(1, Math.ceil(allPosts.length / POSTS_PER_PAGE));
const posts = allPosts.slice(0, POSTS_PER_PAGE);

const pageTitle = 'All Stories';
const pageDescription = 'A curated collection of thoughtful stories about life, creativity, and inspiration.';
---

<Layout title={pageTitle} description={pageDescription}>
	<BlogListing 
		posts={posts} 
		tags={tags} 
		currentPage={1} 
		totalPages={totalPages} 
		totalPosts={allPosts.length}
		basePath="/blog"
	/>
</Layout>
