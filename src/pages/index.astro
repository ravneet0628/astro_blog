---
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';
import AuthorSidebar from '../components/AuthorSidebar.astro';
import { getSiteSettings } from '../lib/site-settings';
import { getPosts } from '../lib/content';

// Get site settings
const siteSettings = getSiteSettings();

// Fetch recent posts
const posts = await getPosts(8);
const featuredPost = posts[0];
---

<Layout title={siteSettings.siteTitle} description={siteSettings.siteDescription}>
			{posts.length > 0 ? (
				<>
			<!-- Hero Section -->
			<section class="max-w-6xl mx-auto px-6 py-12">
				<h2 class="text-xl font-serif font-bold text-primary mb-4">Featured</h2>
				<div class="grid grid-cols-1 lg:grid-cols-3 gap-12 lg:items-stretch">
					<!-- Featured Post -->
					
					<div class="lg:col-span-2">
						<PostCard post={featuredPost} featured={true} />
					</div>

					<!-- Sidebar -->
					<AuthorSidebar />
				</div>
			</section>

			<!-- Recent Posts -->
					{posts.length > 1 && (
				<section class="max-w-6xl mx-auto px-6 py-16">
					<div class="flex items-center justify-between mb-8">
						<h2 class="text-xl font-serif font-bold text-primary">Recent Stories</h2>
									<a 
										href="/blog" 
							class="text-accent hover:text-primary font-medium transition-colors"
									>
							View all â†’
									</a>
								</div>
								
								<div class="grid gap-8 md:grid-cols-1 lg:grid-cols-2">
									{posts.slice(1, 7).map((post) => (
							<PostCard post={post} />
						))}
							</div>
						</section>
					)}
				</>
			) : (
				<!-- Empty State -->
		<section class="max-w-4xl mx-auto px-6 py-32 text-center">
			<h1 class="text-4xl font-serif font-bold text-primary mb-4">
				Welcome
			</h1>
			<p class="text-xl text-primary/70 mb-8">
				No stories yet. Check back soon for new content.
							</p>
				</section>
			)}
</Layout>
