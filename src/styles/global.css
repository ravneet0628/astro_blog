@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
	color-scheme: light;
	--color-primary: 11 19 43;
	--color-accent: 99 102 241;
	--color-muted: 248 250 252;
	--color-surface: 255 255 255;
	--color-border: 226 232 240;
	--color-progress: 11 19 43;
	--color-progress-track: 226 232 240;
	--shadow-card: 0 30px 60px rgba(11, 19, 43, 0.08);
	--shadow-card-hover: 0 35px 70px rgba(11, 19, 43, 0.12);
	--transition-base: 220ms cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme='dark'] {
	color-scheme: dark;
	--color-primary: 245 245 249;
	--color-accent: 250 204 99;
	--color-muted: 34 39 63;
	--color-surface: 15 18 32;
	--color-border: 63 69 97;
	--color-progress: 250 204 99;
	--color-progress-track: 46 52 79;
	--shadow-card: 0 30px 60px rgba(0, 0, 0, 0.45);
	--shadow-card-hover: 0 40px 80px rgba(0, 0, 0, 0.6);
}

@layer base {
	html {
		scroll-behavior: smooth;
	}

	body {
		background-color: rgb(var(--color-surface));
		color: rgb(var(--color-primary));
		@apply font-sans;
		transition: background-color var(--transition-base), color var(--transition-base);
	}
	
	h1, h2, h3, h4, h5, h6 {
		@apply font-serif text-primary;
	}
	
	a {
		color: rgb(var(--color-accent));
		text-decoration: none;
		transition: color var(--transition-base);
	}
	
	a:hover {
		color: rgb(var(--color-primary));
	}

	button:focus,
	input:focus,
	textarea:focus,
	select:focus {
		outline: 2px solid rgb(var(--color-accent));
		outline-offset: 2px;
	}
}

@layer utilities {
	.line-clamp-1 {
		overflow: hidden;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 1;
	}

	.line-clamp-2 {
		overflow: hidden;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 2;
	}

	.line-clamp-3 {
		overflow: hidden;
		display: -webkit-box;
		-webkit-box-orient: vertical;
		-webkit-line-clamp: 3;
	}

	.interactive-card {
		transition: transform var(--transition-base), box-shadow var(--transition-base), background-color var(--transition-base);
		box-shadow: var(--shadow-card);
	}

	.interactive-card:hover,
	.interactive-card:focus-within {
		transform: translateY(-4px) scale(1.01);
		box-shadow: var(--shadow-card-hover);
	}
}

@layer components {
	.reading-progress {
		position: fixed;
		inset: 0 0 auto 0;
		height: 3px;
		background-color: transparent;
		z-index: 60;
		pointer-events: none;
	}

	.reading-progress__track {
		width: 100%;
		height: 100%;
		background-color: rgb(var(--color-progress-track));
		opacity: 0.6;
	}

	.reading-progress__bar {
		display: block;
		height: 100%;
		width: 0%;
		background: linear-gradient(90deg, rgb(var(--color-accent)) 0%, rgb(var(--color-progress)) 100%);
		transform-origin: left center;
		transition: width 120ms linear;
	}

	.toc-link {
		display: block;
		padding: 0.35rem 0;
		color: rgb(var(--color-primary) / 0.7);
		font-size: 0.92rem;
		line-height: 1.4;
		transition: color var(--transition-base);
	}

	.toc-link[data-depth='3'] {
		padding-left: 0.75rem;
		font-size: 0.85rem;
	}

	.toc-link[aria-current='true'] {
		color: rgb(var(--color-accent));
		font-weight: 600;
	}

	[data-toc-list],
	[data-toc-mobile-list] {
		list-style: none;
		margin: 0;
		padding: 0;
	}

	[data-toc-list] li,
	[data-toc-mobile-list] li {
		margin-bottom: 0.35rem;
	}

	[data-toc-list] li:last-child,
	[data-toc-mobile-list] li:last-child {
		margin-bottom: 0;
	}

	.theme-toggle {
		@apply relative inline-flex items-center justify-center rounded-full border border-border/60 text-primary transition-colors duration-200;
		padding: 0.4rem;
		min-width: 2.5rem;
		background-color: rgb(var(--color-surface));
	}

	.theme-toggle:hover,
	.theme-toggle:focus-visible {
		color: rgb(var(--color-accent));
		border-color: rgb(var(--color-accent));
	}

	.theme-toggle__icon {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.theme-toggle__icon--moon {
		display: none;
	}

	[data-theme='dark'] .theme-toggle__icon--moon {
		display: flex;
	}

	[data-theme='dark'] .theme-toggle__icon--sun {
		display: none;
	}
}

::-webkit-scrollbar {
	width: 8px;
}

::-webkit-scrollbar-track {
	background: rgb(var(--color-muted));
}

::-webkit-scrollbar-thumb {
	background: rgb(var(--color-primary));
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: rgb(var(--color-accent));
}

::selection {
	background-color: rgb(var(--color-accent));
	color: #ffffff;
}

@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}
